<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PANEL DE COCINA - Mia's Sugar</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: white; padding: 20px; margin: 0; }
        h1 { text-align: center; color: #F8BBD0; border-bottom: 2px solid #F8BBD0; padding-bottom: 10px; text-transform: uppercase; }
        .grid-pedidos { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .pedido-card { background: white; color: #333; padding: 20px; border-radius: 15px; border-left: 15px solid #AD1457; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .mesa-tag { font-size: 1.8em; font-weight: bold; color: #AD1457; display: block; margin-bottom: 10px; }
        ul { padding-left: 20px; font-size: 1.3em; margin: 15px 0; }
        .btn-listo { background: #4caf50; color: white; border: none; padding: 15px; width: 100%; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1.1em; }
    </style>
</head>
<body>
    <h1>üë®‚Äçüç≥ Comandas en Directo</h1>
    <div id="contenedor-pedidos" class="grid-pedidos">Cargando pedidos...</div>

    <script>
        // Configuraci√≥n de tu Firebase
        const firebaseConfig = { databaseURL: "https://mia-s-sugar-default-rtdb.europe-west1.firebasedatabase.app" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('pedidos').on('value', (snapshot) => {
            const data = snapshot.val();
            let html = "";
            for (let id in data) {
                if (data[id].estado === "Nuevo") {
                    html += `
                        <div class="pedido-card">
                            <span class="mesa-tag">üìç ${data[id].ubicacion}</span>
                            <ul>${data[id].productos.map(p => `<li>${p}</li>`).join('')}</ul>
                            <button class="btn-listo" onclick="marcarListo('${id}')">‚úì SERVIDO / BORRAR</button>
                        </div>
                    `;
                }
            }
            document.getElementById('contenedor-pedidos').innerHTML = html || "<h2 style='text-align:center; width:100%; opacity:0.5;'>‚òï No hay pedidos pendientes...</h2>";
        });

        function marcarListo(id) {
            db.ref('pedidos/' + id).update({ estado: "Servido" });
        }
    </script>
</body>
</html>
